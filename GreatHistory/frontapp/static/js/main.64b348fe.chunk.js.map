{"version":3,"sources":["components/Header.js","components/Footer.js","components/UserList.js","components/Main.js","components/CategoryList.js","components/LoginForm.js","components/RegisterForm.js","App.js","reportWebVitals.js","index.js"],"names":["Header","loginLink","loginTitle","loginHandler","isAuthenticated","logout","className","to","onClick","Footer","User","user","id","username","date_birth","UserList","users","map","Main","Category","category","name","desc","CategoryList","categories","LoginForm","props","state","password","event","this","setState","target","value","preventDefault","login","method","onSubmit","handleSubmit","type","placeholder","onChange","handleChange","React","Component","RegisterForm","password1","password2","email","register","getResourceURL","suffix","App","accessToken","getAccessToken","loadState","headers","getHeaders","axios","get","then","result","data","catch","error","console","log","post","refreshToken","refresh","access","saveTokens","localStorage","setItem","clearState","getItem","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.64b348fe.chunk.js","sourcesContent":["import {NavLink as Link} from \"react-router-dom\";\nimport React from \"react\";\n\nfunction Header({isAuthenticated, logout}) {\n    let loginLink, loginTitle, loginHandler;\n    loginLink = \"/login\";\n    loginTitle = \"login\";\n    if (isAuthenticated) {\n        loginLink = \"/logout\";\n        loginTitle = \"logout\";\n        loginHandler = logout;\n    }\n    return (\n        <header className=\"d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom\">\n            <Link to={\"/\"}\n                  className=\"d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none\">\n                GreatHistory\n            </Link>\n            <ul className=\"nav nav-pills\">\n                <li className=\"nav-item\">\n                    <Link to={\"/users\"} className=\"nav-link\">\n                        Users\n                    </Link>\n                </li>\n                <li className=\"nav-item\">\n                    <Link to={\"/categories\"} className=\"nav-link\">\n                        Categories\n                    </Link>\n                </li>\n                <li className=\"nav-item\">\n                    <Link to={loginLink} className=\"nav-link\" onClick={loginHandler}>\n                        {loginTitle}\n                    </Link>\n                </li>\n            </ul>\n        </header>\n    )\n}\n\nexport default Header;\n","const Footer = () => {\n    return (\n        <footer>\n            &copy; KPK, 2021\n        </footer>\n    )\n}\n\n\nexport default Footer;","const User = ({user}) => {\n    // console.log('user:', user);\n    return (\n        <tr className=\"user-row\">\n            <td>\n                {user.id}\n            </td>\n            <td>\n                {user.username}\n            </td>\n            <td>\n                {user.date_birth}\n            </td>\n        </tr>\n    )\n}\n\nconst UserList = ({users}) => {\n    // console.log('users:', users);\n    return (\n        <div className=\"user-list\">\n            <h1>Users</h1>\n            <table className=\"user-list__table\">\n                <thead>\n                <tr>\n                    <th>id</th>\n                    <th>username</th>\n                    <th>date birth</th>\n                </tr>\n                </thead>\n                <tbody>\n                {users.map((user) => <User key={user.id} user={user}/>)}\n                </tbody>\n            </table>\n        </div>\n    )\n}\n\n\nexport default UserList;\n","const Main = () => {\n    return (\n        <h1>\n            Hello from SPA\n        </h1>\n    )\n}\n\n\nexport default Main;","import {NavLink as Link} from \"react-router-dom\";\nimport React from \"react\";\n\nconst Category = ({category}) => {\n    // console.log('project:', project);\n    return (\n        <tr className=\"project-row\">\n            <td>\n                {category.id}\n            </td>\n            <td>\n                <Link to={`/categories/detail/${category.id}`} className=\"nav-link\">\n                        {category.name}\n                </Link>\n            </td>\n            <td>\n                {category.desc}\n            </td>\n            <td>\n                <Link to={`/categories/delete/${category.id}`} className=\"nav-link\">\n                        delete\n                </Link>\n            </td>\n        </tr>\n    )\n}\n\nconst CategoryList = ({categories}) => {\n    // console.log('projects:', projects);\n    // this.props.projects\n    return (\n        <div className=\"project-list\">\n            <h1>Categories</h1>\n            <table className=\"project-list__table\">\n                <thead>\n                <tr>\n                    <th>id</th>\n                    <th>name</th>\n                    <th>desc</th>\n                </tr>\n                </thead>\n                <tbody>\n                {categories.map((category) => <Category key={category.id} category={category}/>)}\n                </tbody>\n            </table>\n        </div>\n    )\n}\n\nexport default CategoryList;","import React from \"react\";\n\n\nclass LoginForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: \"\",\n            password: \"\"\n        };\n    }\n\n    handleChange(event) {\n        this.setState(\n            {[event.target.name]: event.target.value}\n        )\n\n    }\n\n    handleSubmit(event) {\n        event.preventDefault();\n        this.props.login(this.state.username, this.state.password);\n    }\n\n    render() {\n        return (\n            <div className=\"login-form\">\n                <form method=\"post\"\n                      onSubmit={(event) => this.handleSubmit(event)}>\n                    <input type=\"text\"\n                           name=\"username\"\n                           placeholder=\"username\"\n                           onChange={(event) => this.handleChange(event)}/>\n                    <input type=\"password\"\n                           name=\"password\"\n                           placeholder=\"password\"\n                           onChange={(event) => this.handleChange(event)}/>\n                    <input type=\"submit\"\n                           value=\"login\"/>\n                </form>\n            </div>\n        )\n    }\n\n}\n\nexport default LoginForm\n","import React from \"react\";\n\n\nclass RegisterForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: \"\",\n            password1: \"\",\n            password2: \"\",\n            email: \"\",\n        };\n    }\n\n    handleChange(event) {\n        this.setState(\n            {[event.target.name]: event.target.value}\n        )\n    }\n\n    handleSubmit(event) {\n        event.preventDefault();\n        this.props.register(\n            this.state.username,\n            this.state.password1,\n            this.state.password2,\n            this.state.email\n        );\n    }\n\n    render() {\n        return (\n            <div className=\"login-form\">\n                <form method=\"post\"\n                      onSubmit={(event) => this.handleSubmit(event)}>\n                    <input type=\"text\"\n                           name=\"username\"\n                           placeholder=\"username\"\n                           onChange={(event) => this.handleChange(event)}/>\n                    <input type=\"password\"\n                           name=\"password\"\n                           placeholder=\"password\"\n                           onChange={(event) => this.handleChange(event)}/>\n                    <input type=\"submit\"\n                           value=\"login\"/>\n                </form>\n            </div>\n        )\n    }\n\n}\n\nexport default RegisterForm\n","import 'bootstrap/dist/css/bootstrap.min.css';\nimport React from 'react';\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\nimport Header from \"./components/Header\";\nimport Footer from \"./components/Footer\";\nimport UserList from \"./components/UserList\";\nimport Main from \"./components/Main\";\nimport CategoryList from \"./components/CategoryList\";\nimport axios from \"axios\";\nimport LoginForm from \"./components/LoginForm\";\nimport RegisterForm from \"./components/RegisterForm\";\n\nconst API_URL = \"http://127.0.0.1:8000\";\nconst getResourceURL = (suffix) => `${API_URL}/api/${suffix}/`;\n\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);  // parent constructor\n        this.state = {\n            users: [],\n            categories: [],\n            accessToken: this.getAccessToken(),\n        };\n        // bind\n    }\n\n    componentDidMount() {\n        this.loadState()\n    }\n\n    loadState() {\n        let headers = this.getHeaders();\n\n        // call rest API\n        axios\n            .get(getResourceURL(\"users\"), {headers: headers})\n            .then((result) => {\n                // console.log('users result:', result)\n                this.setState({\n                    users: result.data\n                })\n            })\n            .catch((error) => console.log(error));\n        axios\n            .get(getResourceURL(\"categories\"), {headers: headers})\n            .then((result) => {\n                this.setState({\n                    categories: result.data\n                })\n            })\n            .catch((error) => console.log(error));\n\n    }\n\n    login(username, password) {\n        // console.log('do login', username, password);\n        axios\n            .post(getResourceURL(\"token\"),\n                {\"username\": username, \"password\": password})\n            .then((result) => {\n                let refreshToken = result.data.refresh;\n                let accessToken = result.data.access;\n                console.log(accessToken)\n\n                this.saveTokens(refreshToken, accessToken)\n                this.setState({accessToken: accessToken}, this.loadState)\n            })\n            .catch((error) => console.log(error));\n    }\n\n    register(username, password1, password2, email) {\n        console.log('do register', username, password1, password2, email);\n        // axios\n        //     .post(getResourceURL(\"token\"),\n        //         {\"username\": username, \"password\": password})\n        //     .then((result) => {\n        //         let refreshToken = result.data.refresh;\n        //         let accessToken = result.data.access;\n        //         console.log(accessToken)\n        //\n        //         this.saveTokens(refreshToken, accessToken)\n        //         this.setState({accessToken: accessToken}, this.loadState)\n        //     })\n        //     .catch((error) => console.log(error));\n    }\n\n    logout() {\n        // console.log('do logout');\n        localStorage.setItem('refreshToken', null);\n        localStorage.setItem('accessToken', null);\n        this.clearState();\n    }\n\n    clearState() {\n        this.setState({\n            accessToken: null,\n            users: [],\n            categories: [],\n        })\n    }\n\n    saveTokens(refreshToken, accessToken) {\n        localStorage.setItem('refreshToken', refreshToken);\n        localStorage.setItem('accessToken', accessToken);\n    }\n\n    getAccessToken() {\n        return localStorage.getItem('accessToken')\n    }\n\n    isAuthenticated() {\n        return this.state.accessToken !== 'null' && this.state.accessToken !== null;\n    }\n\n    getHeaders() {\n        let headers = {\n            'Content-Type': \"application/json\"\n        }\n        if (this.isAuthenticated()) {\n            headers['Authorization'] = `Bearer ${this.state.accessToken}`\n        }\n\n        return headers;\n    }\n\n    render() {\n        // console.log('state', this.state);\n        return (\n            <div className=\"main\">\n                <Router>\n                    <Header isAuthenticated={this.isAuthenticated()}\n                            logout={() => this.logout()}/>\n                    <Route exact path=\"/\">\n                        <Main/>\n                    </Route>\n                    <Route exact path=\"/users\">\n                        <UserList users={this.state.users}/>\n                    </Route>\n                    <Route exact path=\"/categories\">\n                        <CategoryList categories={this.state.categories}/>\n                    </Route>\n                    <Route exact path=\"/login\">\n                        <LoginForm\n                            login={(username, password) => this.login(username, password)}/>\n                    </Route>\n                    <Route exact path=\"/register\">\n                        <RegisterForm\n                            register={(username, password1, password2, email) =>\n                                this.register(username, password1, password2, email)}/>\n                    </Route>\n                </Router>\n                <Footer/>\n            </div>\n        )\n    }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}